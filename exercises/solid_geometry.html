<!DOCTYPE html>
<html data-require="math graphie graphie-3d math-format interactive">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Solid geometry</title>
    <script src="../khan-exercise.js"></script>
</head>
<body>
<div class="exercise">
    <div class="problems">
        <div id="interactive">
            <div class="vars">
                <var id="S">randRange(1, 7)</var>
                <var id="NUMFACES">30</var>
                <!--<var id="VERTICES">(function() {-->
                    <!--var verts = [];-->
                    <!--for (var i = 0; i < NUMFACES; ++i) {-->
                        <!--var ang = i * 2 * PI / NUMFACES;-->
                        <!--verts.push([cos(ang), 0.5, sin(ang)]);-->
                    <!--}-->
                    <!--for (var i = 0; i < NUMFACES; ++i) {-->
                        <!--var ang = (i + 0.5) * 2 * PI / NUMFACES;-->
                        <!--verts.push([cos(ang), -0.5, sin(ang)]);-->
                    <!--}-->
                    <!--return verts;-->
                <!--})()</var>-->
                <!--<var id="FACES">(function() {-->
                    <!--var faces = [];-->
                    <!--var front = [];-->
                    <!--var back = [];-->
                    <!--for (var i = 0; i < NUMFACES; ++i) {-->
                        <!--front.push(NUMFACES - i - 1);-->
                        <!--back.push(i + NUMFACES);-->
                    <!--}-->
                    <!--faces.push({ face: front, color: GRAY });-->
                    <!--faces.push({ face: back, color: GRAY });-->
                    <!--for (var i = 0; i < NUMFACES; ++i) {-->
                        <!--var face = [i, (i + 1) % NUMFACES,-->
                                    <!--((i) % NUMFACES) + NUMFACES];-->
                        <!--faces.push({ face: face, color: GREEN });-->
                        <!--var face = [((i + 1) % NUMFACES) + NUMFACES, i + NUMFACES,-->
                                    <!--(i + 1) % NUMFACES];-->
                        <!--faces.push({ face: face, color: GREEN });-->
                    <!--}-->
                    <!--return faces;-->
                <!--})()</var>-->
                <var id="VERTICES">[
                    [-1, 0.5, 1],
                    [1, 0.5, 1],
                    [0, -0.5, 1],
                    [-1, 0.5, -1],
                    [1, 0.5, -1],
                    [0, -0.5, -1]
                ]</var>
                <var id="FACES">[
                    { face: [0, 2, 1], color: GRAY },
                    { face: [3, 4, 5], color: GRAY },
                    { face: [0, 1, 4, 3], color: ORANGE },
                    { face: [1, 2, 5, 4], color: BLUE },
                    { face: [0, 3, 5, 2], color: GREEN }
                ]</var>
            </div>
            <p class="question">
                What is the volume of this thing:
            </p>
            <div class="graphie">
                init({range: [[-2, 2], [-2, 2]], scale: [100, 100]});
                addMouseLayer();

                graph.image1 = raphael.set();
                graph.image2 = raphael.set();
                graph.images = [raphael.set()];
                graph.labels = [[]];

                graph.obj = makeObject(VERTICES);
                graph.obj.addFace({ verts: [0, 2, 1], color: GRAY })
                         .addFace({ verts: [3, 4, 5], color: GRAY })
                         .addFace({ verts: [0, 1, 4, 3], color: ORANGE })
                         .addFace({ verts: [1, 2, 5, 4], color: BLUE })
                         .addFace({ verts: [0, 3, 5, 2], color: GREEN });


                var c = [0, 0, 5.0];
                var e = [0, 0, 5.0];
                var theta = [0, 0, 0];

                graph.transformD = function(a) {
                    var d = [0, 0, 0];
                    d[0] = cos(theta[1]) * (sin(theta[2]) * (a[1] - c[1]) +
                        cos(theta[2]) * (a[0] - c[0])) - sin(theta[1]) *
                        (a[2] - c[2]);
                    d[1] = sin(theta[0]) * (cos(theta[1]) * (a[2] - c[2]) +
                        sin(theta[1]) * (sin(theta[2]) * (a[1] - c[1]) +
                        cos(theta[2]) * (a[0] - c[0]))) + cos(theta[0]) *
                        (cos(theta[2]) * (a[1] - c[1]) - sin(theta[2]) *
                        (a[0] - c[0]));
                    d[2] = cos(theta[0]) * (cos(theta[1]) * (a[2] - c[2]) +
                        sin(theta[1]) * (sin(theta[2]) * (a[1] - c[1]) +
                        cos(theta[2]) * (a[0] - c[0]))) - sin(theta[0]) *
                        (cos(theta[2]) * (a[1] - c[1]) - sin(theta[2]) *
                        (a[0] - c[0]));
                    return d;
                };

                graph.transform = function(a) {
                    var d = graph.transformD(a);
                    var x1 = (d[0] - e[0]) * (e[2] / d[2]);
                    var y1 = (d[1] - e[1]) * (e[2] / d[2]);

                    return [x1, y1];
                };

                graph.drawPending = false;

                graph.drawIt = function() {
                    if (!graph.drawPending) {
                        graph.drawPending = true;
                        var normalOf = function(face) {
                            var a = graph.transformD(VERTICES[face.face[0]]);
                            var b = graph.transformD(VERTICES[face.face[1]]);
                            var c = graph.transformD(VERTICES[face.face[2]]);

                            var ab = [b[0] - a[0], b[1] - a[1], b[2] - a[2]];
                            var ac = [c[0] - a[0], c[1] - a[1], c[2] - a[2]];

                            var normal = [
                                ab[1] * ac[2] - ab[2] * ac[1],
                                ab[2] * ac[0] - ab[0] * ac[2],
                                ab[0] * ac[1] - ab[1] * ac[0]
                            ];

                            var length = sqrt(normal[0] * normal[0] +
                                              normal[1] * normal[1] +
                                              normal[2] * normal[2]);

                            normal[0] /= length;
                            normal[1] /= length;
                            normal[2] /= length;

                            return normal[2];
                        };
                        var facing = function(face) {
                            var normal = normalOf(face);
                            var dot = normal[0] * myNormal[0] +
                                      normal[1] * myNormal[1] +
                                      normal[2] * myNormal[2];
                            return dot;
                        };
                        var myNormal = [sin(x) * cos(y), sin(y), cos(x) * cos(y)];
                        var depthOf = function(face) {
                            var depth = _.reduce(face.face, function(s, f) {
                                return s + graph.transformD(VERTICES[f])[2];
                            }, 0) / face.face.length;
                            return depth;
                        };
                        var sortedFaces = _.sortBy(FACES, normalOf);
                        var faces = [];
                        _.each(sortedFaces, function(face) {
                            if (normalOf(face) > 0) {
                                faces.push(face);
                            }
                        });
                        var image = raphael.set();
                        graph.images.push(image);
                        _.each(FACES[0].face, function(p) {
                            var pt = VERTICES[p];
                        });
                        _.each(faces, function(face) {
                            var color = Raphael.color(face.color);
                            <!--color.v *= normalOf(face) / 2 + 0.3;-->
                            color = Raphael.hsb(color.h, color.s, Math.min(1.0, color.v));
                            image.push(path(_.map(face.face, function(f) {
                                return graph.transform(VERTICES[f]);
                            }),
                            { fill: color, stroke: color, "stroke-width": 1, opacity: 0 }));
                        });
                        var labels = [];
                        _.each(VERTICES, function(vert, i) {
                            <!--labels.push(label(graph.transform(vert), i, "center", false));-->
                        });
                        graph.labels.push(labels);
                        image.attr({ opacity: 1.0 });

                        _.defer(function() {
                            graph.images.shift().remove();
                            _.each(graph.labels.shift(), function(l) {
                                l.remove();
                            });
                            graph.drawPending = false;
                        });
                    }

                };

                var x = -PI / 8;
                var y = -PI / 6;
                c = [sin(x) * cos(y) * 5, sin(y) * 5, cos(x) * cos(y) * 5];
                theta[1] = x;
                theta[0] = -y;
                graph.drawIt();

                var mouseTarget = mouselayer.rect(0, 0, 40 * 10, 40 * 10).attr({
                        fill: "#000", opacity: 0.0
                    });
                $(mouseTarget[0]).bind("vmousedown", function(event) {
                    graph.startX = event.pageX;
                    graph.startY = event.pageY;
                    graph.origX = x;
                    graph.origY = y;
                    $(document).bind("vmousemove vmouseup",
                            function(event) {
                        event.preventDefault();
                        var dx = event.pageX - graph.startX;
                        var dy = event.pageY - graph.startY;
                        x = graph.origX + dx / 200 * PI;
                        y = graph.origY - dy / 200 * PI;
                        c = [sin(x) * cos(y) * 5, sin(y) * 5, cos(x) * cos(y) * 5];
                        theta[1] = x;
                        theta[0] = -y;
                        graph.drawIt();
                        if (event.type === "vmouseup") {
                            $(document).unbind("vmousemove vmouseup");
                        }
                    })
                });

            </div>
        </div>

        <div id="cube-V">
            <div class="vars">
                <var id="s">randRange( 1, 7 )</var>
            </div>

            <div class="question">
                <p>What is the volume of a cube with side length <code><var>s</var></code>?</p>

                <div class="graphie">
                    init({
                        range: [ [-1, 4], [-0.6, 3.1] ]
                    });
                    path([ [0, 0], [0, 2], [2, 2], [2, 0], true ]);
                    path([ [2, 0], [3, 1], [3, 3], [1, 3], [0, 2] ]);
                    path([ [2, 2], [3, 3] ]);
                    label( [1, 0], s, "below" );
                </div>
            </div>

            <div class="solution" data-type="multiple">
                <p><span class="sol" data-type="text"><var>s * s * s</var></span> Cubic Units</p>
            </div>

            <div class="hints">
                <p>The volume of a cube with side length <code>s</code> is <code>V = s^3</code>.</p>
                <p><code>\qquad V = <var>s</var>^3</code></p>
                <p><code>\qquad \hphantom{V} = <var>s</var> \cdot <var>s</var> \cdot <var>s</var></code></p>
                <p><code>\qquad \hphantom{V} = <var>s * s * s</var></code></p>
            </div>
        </div>

        <div id="cube-T">
            <div class="vars">
                <var id="s">randRange( 1, 7 )</var>
            </div>

            <div class="question">
                <p>What is the surface area of a cube with side length <code><var>s</var></code>?</p>

                <div class="graphie">
                    init({
                        range: [ [-1, 4], [-0.6, 3.1] ]
                    });
                    path([ [0, 0], [0, 2], [2, 2], [2, 0], true ]);
                    path([ [2, 0], [3, 1], [3, 3], [1, 3], [0, 2] ]);
                    path([ [2, 2], [3, 3] ]);
                    label( [1, 0], s, "below" );
                </div>
            </div>

            <div class="solution" data-type="multiple">
                <p><span class="sol" data-type="text"><var>6 * s * s</var></span> Square Units</p>
            </div>

            <div class="hints">
                <p>The area of each face is simply the area of a square: <code><var>s</var>^2 = <var>s * s</var></code>.</p>
                <p>A cube has six faces so the total surface area is <code>6 \cdot <var>s * s</var> = <var>6 * s * s</var></code>.</p>
            </div>
        </div>

        <div id="cylinder-V">
            <div class="vars">
                <var id="r">randRange( 2, 4 )</var>
                <var id="h">randRange( 5, 9 )</var>
            </div>

            <div class="question">
                <p>What is the volume of a cylinder with base radius <code><var>r</var></code> and height <code><var>h</var></code>?</p>

                <div class="graphie">
                    init({
                        range: [ [-1, 4], [-2, 4] ]
                    });

                    arc( [1.5, 3], [1.5, 0.4], 0, 48 );
                    arc( [1.5, 3], [1.5, 0.4], 70, 360 );
                    path([ [0, -1], [0, 3] ]);
                    path([ [3, -1], [3, 3] ]);
                    arc( [1.5, -1], [1.5, 0.4], 0, 180, {
                        strokeDasharray: "- "
                    } );
                    arc( [1.5, -1], [1.5, 0.4], 180, 360 );

                    path([ [1.5, 3], [3, 3] ]);
                    label( [2.25, 3], r, "above" );
                    label( [3, 1], h, "right" );
                </div>
            </div>

            <div class="solution" data-type="multiple">
                <p><span class="sol" data-forms="pi"><var>Math.PI * r * r * h</var></span> Cubic Units</p>
            </div>

            <div class="hints">
                <p>The area of the base is simply the area of a circle: <code>\pi r^2 = \pi \cdot <var>r</var>^2 = <var>r * r</var> \pi</code>.</p>
                <p>The volume of the cylinder is the area of the base times the height: <code>B \cdot h = <var>r * r</var>\pi \cdot <var>h</var> = <var>r * r * h</var>\pi</code>.</p>
            </div>
        </div>

        <div id="cylinder-T">
            <div class="vars">
                <var id="r">randRange( 2, 4 )</var>
                <var id="h">randRange( 5, 9 )</var>
            </div>

            <div class="question">
                <p>What is the surface area of a cylinder with base radius <code><var>r</var></code> and height <code><var>h</var></code>?</p>

                <div class="graphie">
                    init({
                        range: [ [-1, 4], [-2, 4] ]
                    });

                    arc( [1.5, 3], [1.5, 0.4], 0, 48 );
                    arc( [1.5, 3], [1.5, 0.4], 70, 360 );
                    path([ [0, -1], [0, 3] ]);
                    path([ [3, -1], [3, 3] ]);
                    arc( [1.5, -1], [1.5, 0.4], 0, 180, {
                        strokeDasharray: "- "
                    } );
                    arc( [1.5, -1], [1.5, 0.4], 180, 360 );

                    path([ [1.5, 3], [3, 3] ]);
                    label( [2.25, 3], r, "above" );
                    label( [3, 1], h, "right" );
                </div>
            </div>

            <div class="solution" data-type="multiple">
                <p><span class="sol" data-forms="pi"><var>Math.PI * 2 * r * ( r + h )</var></span> Square Units</p>
            </div>

            <div class="hints">
                <p>The areas of the top and the base are simply the area of a circle: <code>\pi r^2 = \pi \cdot <var>r</var>^2 = <var>r * r</var> \pi</code>.</p>
                <p>The lateral surface area is the same as the area of a rectangle with height <code><var>h</var></code> and width equal to the circumference of the base.</p>
                <p>That circumference is <code>2 \pi r = 2\pi \cdot <var>r</var> = <var>2 * r</var>\pi</code>.</p>
                <p>Thus, the lateral surface area is <code>wh = <var>2 * r</var> \pi \cdot <var>h</var> = <var>2 * r * h</var> \pi</code>.</p>
                <p>The total surface area is <code><var>r * r</var> \pi + <var>r * r</var> \pi + <var>2 * r * h</var> \pi = <var>2 * r * ( r + h )</var>\pi</code>.</p>
            </div>
        </div>

        <div id="box-V">
            <div class="vars" data-ensure="d > h">
                <var id="w">randRange( 5, 9 )</var>
                <var id="h">randRange( 2, 4 )</var>
                <var id="d">randRange( 2, 4 )</var>
            </div>

            <div class="question">
                <p>What is the volume of a rectangular box with width <code><var>w</var></code>, height <code><var>h</var></code>, and depth <code><var>d</var></code>?</p>

                <div class="graphie">
                    init({
                        range: [ [-1, 7], [-1, 3.5] ]
                    });

                    var wv = [ 4, 0 ];
                    var hv = [ 0, 2 ];
                    var dv = [ 2, 1 ];

                    path([ [0, 0], hv, [wv[0] + hv[0], wv[1] + hv[1]], wv, true ]);
                    path([ hv, [hv[0] + dv[0], hv[1] + dv[1]], [wv[0] + hv[0] + dv[0], wv[1] + hv[1] + dv[1]], [wv[0] + dv[0], wv[1] + dv[1]], wv ]);
                    path([ [wv[0] + hv[0], wv[1] + hv[1]], [wv[0] + hv[0] + dv[0], wv[1] + hv[1] + dv[1]] ]);

                    label( [0.5 * wv[0], 0.5 * wv[1]], w, "below" );
                    label( [0.5 * hv[0], 0.5 * hv[1]], h, "left" );
                    label( [wv[0] + 0.5 * dv[0], wv[1] + 0.5 * dv[1]], d, "above" );
                </div>
            </div>

            <div class="solution" data-type="multiple">
                <p><span class="sol" data-type="text"><var>w * h * d</var></span> Cubic Units</p>
            </div>

            <div class="hints">
                <p>The volume of a right rectangular prism with width <code>w</code>, height <code>h</code>, and depth <code>d</code> is <code>V = whd</code>.</p>
                <p>In this case, the volume is <code><var>w</var> \cdot <var>h</var> \cdot <var>d</var> = <var>w * h * d</var></code>.</p>
            </div>
        </div>

        <div id="box-T">
            <div class="vars" data-ensure="d > h">
                <var id="w">randRange( 5, 9 )</var>
                <var id="h">randRange( 2, 4 )</var>
                <var id="d">randRange( 2, 4 )</var>
            </div>

            <div class="question">
                <p>What is the surface area of a rectangular box with width <code><var>w</var></code>, height <code><var>h</var></code>, and depth <code><var>d</var></code>?</p>

                <div class="graphie">
                    init({
                        range: [ [-1, 7], [-1, 3.5] ]
                    });

                    var wv = [ 4, 0 ];
                    var hv = [ 0, 2 ];
                    var dv = [ 2, 1 ];

                    path([ [0, 0], hv, [wv[0] + hv[0], wv[1] + hv[1]], wv, true ]);
                    path([ hv, [hv[0] + dv[0], hv[1] + dv[1]], [wv[0] + hv[0] + dv[0], wv[1] + hv[1] + dv[1]], [wv[0] + dv[0], wv[1] + dv[1]], wv ]);
                    path([ [wv[0] + hv[0], wv[1] + hv[1]], [wv[0] + hv[0] + dv[0], wv[1] + hv[1] + dv[1]] ]);

                    label( [0.5 * wv[0], 0.5 * wv[1]], w, "below" );
                    label( [0.5 * hv[0], 0.5 * hv[1]], h, "left" );
                    label( [wv[0] + 0.5 * dv[0], wv[1] + 0.5 * dv[1]], d, "above" );
                </div>
            </div>

            <div class="solution" data-type="multiple">
                <p><span class="sol" data-type="text"><var>2 * ( w * h + w * d + h * d )</var></span> Square Units</p>
            </div>

            <div class="hints">
                <p>The surface area of a right rectangular prism with width <code>w</code>, height <code>h</code>, and depth <code>d</code> is <code>T = 2wh + 2wd + 2hd</code>.</p>
                <p>In this case, the surface area is <code>2 \cdot (<var>w</var> \cdot <var>h</var>) + 2 \cdot (<var>w</var> \cdot <var>d</var>) + 2 \cdot (<var>h</var> \cdot <var>d</var>) = <var>2 * ( w * h + w * d + h * d )</var></code>.</p>
            </div>
        </div>

        <div id="tripri-V">
            <div class="vars" data-ensure="w * h % 2 === 0 && h < w && w < d">
                <var id="w">randRange( 4, 7 )</var>
                <var id="h">randRange( 3, 4 )</var>
                <var id="d">randRange( 5, 9 )</var>
            </div>

            <div class="question">
                <p>What is the volume of a triangular prism of depth <code><var>d</var></code> whose base has width <code><var>w</var></code> and height <code><var>h</var></code>?</p>

                <div class="graphie">
                    init({
                        range: [ [-1, 7], [-1, 3.5] ]
                    });

                    var wv = [ 3, 0 ];
                    var hv = [ 2, 2 ];
                    var dv = [ 3, 1 ];

                    path([ [0, 0], dv, [hv[0] + dv[0], hv[1] + dv[1]], [wv[0] + dv[0], wv[1] + dv[1]], dv ], {
                        strokeDasharray: "- ",
                        stroke: "#ddd"
                    });

                    path([ [0, 0], hv, wv, true ]);
                    path([ hv, [hv[0] + dv[0], hv[1] + dv[1]], [wv[0] + dv[0], wv[1] + dv[1]], wv ]);

                    // altitude
                    path([ [hv[0], 0], hv ]);

                    label( [0.5 * wv[0], 0.5 * wv[1]], w, "below" );
                    label( [hv[0], 0.5 * hv[1]], h, "left" );
                    label( [wv[0] + 0.5 * dv[0], wv[1] + 0.5 * dv[1]], d, "below right" );
                </div>
            </div>

            <div class="solution" data-type="multiple">
                <p><span class="sol" data-type="text"><var>w * h * d / 2</var></span> Cubic Units</p>
            </div>

            <div class="hints">
                <p>The area of the triangular base is <code>\frac12 w h = \frac12 (<var>w</var> \cdot <var>h</var>) = <var>w * h / 2</var></code>.</p>
                <p>The volume of the prism is the area of the base times the depth: <code>B \cdot d = <var>w * h / 2</var> \cdot <var>d</var> = <var>w * h * d / 2</var></code>.</p>
            </div>
        </div>
    </div>
    </div>
</body>
</html>
